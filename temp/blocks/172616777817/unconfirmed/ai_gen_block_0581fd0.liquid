{% doc %}
  @prompt
    generate a modern size chart for me should be customizable and editable 
{% enddoc %}
{% assign ai_gen_id = block.id | replace: '_', '' | downcase %}

{% style %}
  .ai-size-chart-{{ ai_gen_id }} {
    background-color: {{ block.settings.background_color }};
    border-radius: {{ block.settings.border_radius }}px;
    padding: {{ block.settings.padding }}px;
    margin: {{ block.settings.margin }}px 0;
    border: 1px solid {{ block.settings.border_color }};
  }

  .ai-size-chart-header-{{ ai_gen_id }} {
    text-align: {{ block.settings.title_alignment }};
    margin-bottom: 24px;
  }

  .ai-size-chart-title-{{ ai_gen_id }} {
    font-size: {{ block.settings.title_size }}px;
    color: {{ block.settings.title_color }};
    margin: 0 0 8px;
    font-weight: 600;
  }

  .ai-size-chart-description-{{ ai_gen_id }} {
    font-size: {{ block.settings.description_size }}px;
    color: {{ block.settings.description_color }};
    margin: 0;
    line-height: 1.5;
  }

  .ai-size-chart-table-wrapper-{{ ai_gen_id }} {
    overflow-x: auto;
    border-radius: {{ block.settings.table_border_radius }}px;
    border: 1px solid {{ block.settings.table_border_color }};
  }

  .ai-size-chart-table-{{ ai_gen_id }} {
    width: 100%;
    border-collapse: collapse;
    font-size: {{ block.settings.table_text_size }}px;
  }

  .ai-size-chart-table-{{ ai_gen_id }} th {
    background-color: {{ block.settings.header_bg_color }};
    color: {{ block.settings.header_text_color }};
    padding: {{ block.settings.cell_padding }}px;
    text-align: {{ block.settings.header_alignment }};
    font-weight: 600;
    border-bottom: 2px solid {{ block.settings.table_border_color }};
  }

  .ai-size-chart-table-{{ ai_gen_id }} td {
    background-color: {{ block.settings.cell_bg_color }};
    color: {{ block.settings.cell_text_color }};
    padding: {{ block.settings.cell_padding }}px;
    text-align: {{ block.settings.cell_alignment }};
    border-bottom: 1px solid {{ block.settings.table_border_color }};
  }

  .ai-size-chart-table-{{ ai_gen_id }} tr:nth-child(even) td {
    background-color: {{ block.settings.alternate_row_color }};
  }

  .ai-size-chart-table-{{ ai_gen_id }} tr:hover td {
    background-color: {{ block.settings.hover_color }};
  }

  .ai-size-chart-notes-{{ ai_gen_id }} {
    margin-top: 20px;
    padding: 16px;
    background-color: {{ block.settings.notes_bg_color }};
    border-radius: {{ block.settings.notes_border_radius }}px;
    border-left: 4px solid {{ block.settings.notes_accent_color }};
  }

  .ai-size-chart-notes-title-{{ ai_gen_id }} {
    font-size: {{ block.settings.notes_title_size }}px;
    color: {{ block.settings.notes_title_color }};
    margin: 0 0 8px;
    font-weight: 600;
  }

  .ai-size-chart-notes-content-{{ ai_gen_id }} {
    font-size: {{ block.settings.notes_text_size }}px;
    color: {{ block.settings.notes_text_color }};
    line-height: 1.5;
  }

  .ai-size-chart-empty-state-{{ ai_gen_id }} {
    text-align: center;
    padding: 40px 20px;
    color: #666;
    font-style: italic;
  }

  @media screen and (max-width: 749px) {
    .ai-size-chart-{{ ai_gen_id }} {
      padding: {{ block.settings.padding | times: 0.75 }}px;
    }
    
    .ai-size-chart-table-{{ ai_gen_id }} {
      font-size: {{ block.settings.table_text_size | times: 0.9 }}px;
    }
    
    .ai-size-chart-table-{{ ai_gen_id }} th,
    .ai-size-chart-table-{{ ai_gen_id }} td {
      padding: {{ block.settings.cell_padding | times: 0.75 }}px;
    }
  }
{% endstyle %}

<div class="ai-size-chart-{{ ai_gen_id }}" {{ block.shopify_attributes }}>
  {% if block.settings.title != blank or block.settings.description != blank %}
    <div class="ai-size-chart-header-{{ ai_gen_id }}">
      {% if block.settings.title != blank %}
        <h2 class="ai-size-chart-title-{{ ai_gen_id }}">{{ block.settings.title }}</h2>
      {% endif %}
      {% if block.settings.description != blank %}
        <div class="ai-size-chart-description-{{ ai_gen_id }}">{{ block.settings.description }}</div>
      {% endif %}
    </div>
  {% endif %}

  {% assign has_content = false %}
  {% for i in (1..6) %}
    {% assign size_key = 'size_' | append: i %}
    {% assign measurement_1_key = 'measurement_1_' | append: i %}
    {% if block.settings[size_key] != blank or block.settings[measurement_1_key] != blank %}
      {% assign has_content = true %}
      {% break %}
    {% endif %}
  {% endfor %}

  {% if has_content %}
    <div class="ai-size-chart-table-wrapper-{{ ai_gen_id }}">
      <table class="ai-size-chart-table-{{ ai_gen_id }}">
        <thead>
          <tr>
            <th>{{ block.settings.size_header | default: 'Size' }}</th>
            {% if block.settings.measurement_1_header != blank %}
              <th>{{ block.settings.measurement_1_header }}</th>
            {% endif %}
            {% if block.settings.measurement_2_header != blank %}
              <th>{{ block.settings.measurement_2_header }}</th>
            {% endif %}
            {% if block.settings.measurement_3_header != blank %}
              <th>{{ block.settings.measurement_3_header }}</th>
            {% endif %}
            {% if block.settings.measurement_4_header != blank %}
              <th>{{ block.settings.measurement_4_header }}</th>
            {% endif %}
          </tr>
        </thead>
        <tbody>
          {% for i in (1..6) %}
            {% assign size_key = 'size_' | append: i %}
            {% assign measurement_1_key = 'measurement_1_' | append: i %}
            {% assign measurement_2_key = 'measurement_2_' | append: i %}
            {% assign measurement_3_key = 'measurement_3_' | append: i %}
            {% assign measurement_4_key = 'measurement_4_' | append: i %}
            
            {% assign size_value = block.settings[size_key] %}
            {% assign measurement_1_value = block.settings[measurement_1_key] %}
            {% assign measurement_2_value = block.settings[measurement_2_key] %}
            {% assign measurement_3_value = block.settings[measurement_3_key] %}
            {% assign measurement_4_value = block.settings[measurement_4_key] %}
            
            {% if size_value != blank or measurement_1_value != blank %}
              <tr>
                <td>{{ size_value }}</td>
                {% if block.settings.measurement_1_header != blank %}
                  <td>{{ measurement_1_value }}</td>
                {% endif %}
                {% if block.settings.measurement_2_header != blank %}
                  <td>{{ measurement_2_value }}</td>
                {% endif %}
                {% if block.settings.measurement_3_header != blank %}
                  <td>{{ measurement_3_value }}</td>
                {% endif %}
                {% if block.settings.measurement_4_header != blank %}
                  <td>{{ measurement_4_value }}</td>
                {% endif %}
              </tr>
            {% endif %}
          {% endfor %}
        </tbody>
      </table>
    </div>
  {% else %}
    <div class="ai-size-chart-empty-state-{{ ai_gen_id }}">
      Next, add your size chart data in the settings
    </div>
  {% endif %}

  {% if block.settings.notes_title != blank or block.settings.notes_content != blank %}
    <div class="ai-size-chart-notes-{{ ai_gen_id }}">
      {% if block.settings.notes_title != blank %}
        <h3 class="ai-size-chart-notes-title-{{ ai_gen_id }}">{{ block.settings.notes_title }}</h3>
      {% endif %}
      {% if block.settings.notes_content != blank %}
        <div class="ai-size-chart-notes-content-{{ ai_gen_id }}">{{ block.settings.notes_content }}</div>
      {% endif %}
    </div>
  {% endif %}
</div>

{% schema %}
{
  "name": "Size chart",
  "settings": [
    {
      "type": "header",
      "content": "Content"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Title",
      "default": "Size Chart"
    },
    {
      "type": "richtext",
      "id": "description",
      "label": "Description",
      "default": "<p>Find your perfect fit with our detailed size guide.</p>"
    },
    {
      "type": "header",
      "content": "Table headers"
    },
    {
      "type": "text",
      "id": "size_header",
      "label": "Size column header",
      "default": "Size"
    },
    {
      "type": "text",
      "id": "measurement_1_header",
      "label": "Measurement 1 header",
      "default": "Chest (inches)"
    },
    {
      "type": "text",
      "id": "measurement_2_header",
      "label": "Measurement 2 header",
      "default": "Waist (inches)"
    },
    {
      "type": "text",
      "id": "measurement_3_header",
      "label": "Measurement 3 header"
    },
    {
      "type": "text",
      "id": "measurement_4_header",
      "label": "Measurement 4 header"
    },
    {
      "type": "header",
      "content": "Size 1"
    },
    {
      "type": "text",
      "id": "size_1",
      "label": "Size",
      "default": "XS"
    },
    {
      "type": "text",
      "id": "measurement_1_1",
      "label": "Measurement 1",
      "default": "32-34"
    },
    {
      "type": "text",
      "id": "measurement_2_1",
      "label": "Measurement 2",
      "default": "26-28"
    },
    {
      "type": "text",
      "id": "measurement_3_1",
      "label": "Measurement 3"
    },
    {
      "type": "text",
      "id": "measurement_4_1",
      "label": "Measurement 4"
    },
    {
      "type": "header",
      "content": "Size 2"
    },
    {
      "type": "text",
      "id": "size_2",
      "label": "Size",
      "default": "S"
    },
    {
      "type": "text",
      "id": "measurement_1_2",
      "label": "Measurement 1",
      "default": "34-36"
    },
    {
      "type": "text",
      "id": "measurement_2_2",
      "label": "Measurement 2",
      "default": "28-30"
    },
    {
      "type": "text",
      "id": "measurement_3_2",
      "label": "Measurement 3"
    },
    {
      "type": "text",
      "id": "measurement_4_2",
      "label": "Measurement 4"
    },
    {
      "type": "header",
      "content": "Size 3"
    },
    {
      "type": "text",
      "id": "size_3",
      "label": "Size",
      "default": "M"
    },
    {
      "type": "text",
      "id": "measurement_1_3",
      "label": "Measurement 1",
      "default": "36-38"
    },
    {
      "type": "text",
      "id": "measurement_2_3",
      "label": "Measurement 2",
      "default": "30-32"
    },
    {
      "type": "text",
      "id": "measurement_3_3",
      "label": "Measurement 3"
    },
    {
      "type": "text",
      "id": "measurement_4_3",
      "label": "Measurement 4"
    },
    {
      "type": "header",
      "content": "Size 4"
    },
    {
      "type": "text",
      "id": "size_4",
      "label": "Size",
      "default": "L"
    },
    {
      "type": "text",
      "id": "measurement_1_4",
      "label": "Measurement 1",
      "default": "38-40"
    },
    {
      "type": "text",
      "id": "measurement_2_4",
      "label": "Measurement 2",
      "default": "32-34"
    },
    {
      "type": "text",
      "id": "measurement_3_4",
      "label": "Measurement 3"
    },
    {
      "type": "text",
      "id": "measurement_4_4",
      "label": "Measurement 4"
    },
    {
      "type": "header",
      "content": "Size 5"
    },
    {
      "type": "text",
      "id": "size_5",
      "label": "Size",
      "default": "XL"
    },
    {
      "type": "text",
      "id": "measurement_1_5",
      "label": "Measurement 1",
      "default": "40-42"
    },
    {
      "type": "text",
      "id": "measurement_2_5",
      "label": "Measurement 2",
      "default": "34-36"
    },
    {
      "type": "text",
      "id": "measurement_3_5",
      "label": "Measurement 3"
    },
    {
      "type": "text",
      "id": "measurement_4_5",
      "label": "Measurement 4"
    },
    {
      "type": "header",
      "content": "Size 6"
    },
    {
      "type": "text",
      "id": "size_6",
      "label": "Size",
      "default": "XXL"
    },
    {
      "type": "text",
      "id": "measurement_1_6",
      "label": "Measurement 1",
      "default": "42-44"
    },
    {
      "type": "text",
      "id": "measurement_2_6",
      "label": "Measurement 2",
      "default": "36-38"
    },
    {
      "type": "text",
      "id": "measurement_3_6",
      "label": "Measurement 3"
    },
    {
      "type": "text",
      "id": "measurement_4_6",
      "label": "Measurement 4"
    },
    {
      "type": "header",
      "content": "Notes"
    },
    {
      "type": "text",
      "id": "notes_title",
      "label": "Notes title",
      "default": "Sizing Notes"
    },
    {
      "type": "richtext",
      "id": "notes_content",
      "label": "Notes content",
      "default": "<p>All measurements are in inches. For the best fit, measure yourself and compare to the chart above. If you're between sizes, we recommend sizing up.</p>"
    },
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "select",
      "id": "title_alignment",
      "label": "Title alignment",
      "options": [
        {"value": "left", "label": "Left"},
        {"value": "center", "label": "Center"},
        {"value": "right", "label": "Right"}
      ],
      "default": "center"
    },
    {
      "type": "select",
      "id": "header_alignment",
      "label": "Table header alignment",
      "options": [
        {"value": "left", "label": "Left"},
        {"value": "center", "label": "Center"},
        {"value": "right", "label": "Right"}
      ],
      "default": "center"
    },
    {
      "type": "select",
      "id": "cell_alignment",
      "label": "Table cell alignment",
      "options": [
        {"value": "left", "label": "Left"},
        {"value": "center", "label": "Center"},
        {"value": "right", "label": "Right"}
      ],
      "default": "center"
    },
    {
      "type": "range",
      "id": "padding",
      "min": 10,
      "max": 60,
      "step": 5,
      "unit": "px",
      "label": "Container padding",
      "default": 30
    },
    {
      "type": "range",
      "id": "margin",
      "min": 0,
      "max": 40,
      "step": 5,
      "unit": "px",
      "label": "Container margin",
      "default": 20
    },
    {
      "type": "range",
      "id": "border_radius",
      "min": 0,
      "max": 20,
      "step": 2,
      "unit": "px",
      "label": "Container border radius",
      "default": 8
    },
    {
      "type": "range",
      "id": "table_border_radius",
      "min": 0,
      "max": 15,
      "step": 1,
      "unit": "px",
      "label": "Table border radius",
      "default": 6
    },
    {
      "type": "range",
      "id": "cell_padding",
      "min": 8,
      "max": 24,
      "step": 2,
      "unit": "px",
      "label": "Cell padding",
      "default": 12
    },
    {
      "type": "range",
      "id": "notes_border_radius",
      "min": 0,
      "max": 15,
      "step": 1,
      "unit": "px",
      "label": "Notes border radius",
      "default": 6
    },
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "border_color",
      "label": "Border color",
      "default": "#f0f0f0"
    },
    {
      "type": "color",
      "id": "title_color",
      "label": "Title color",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "description_color",
      "label": "Description color",
      "default": "#666666"
    },
    {
      "type": "color",
      "id": "table_border_color",
      "label": "Table border color",
      "default": "#e0e0e0"
    },
    {
      "type": "color",
      "id": "header_bg_color",
      "label": "Header background color",
      "default": "#f8f9fa"
    },
    {
      "type": "color",
      "id": "header_text_color",
      "label": "Header text color",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "cell_bg_color",
      "label": "Cell background color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "cell_text_color",
      "label": "Cell text color",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "alternate_row_color",
      "label": "Alternate row color",
      "default": "#f8f9fa"
    },
    {
      "type": "color",
      "id": "hover_color",
      "label": "Row hover color",
      "default": "#e8f4f8"
    },
    {
      "type": "color",
      "id": "notes_bg_color",
      "label": "Notes background color",
      "default": "#f8f9fa"
    },
    {
      "type": "color",
      "id": "notes_accent_color",
      "label": "Notes accent color",
      "default": "#ab8c52"
    },
    {
      "type": "color",
      "id": "notes_title_color",
      "label": "Notes title color",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "notes_text_color",
      "label": "Notes text color",
      "default": "#666666"
    },
    {
      "type": "header",
      "content": "Typography"
    },
    {
      "type": "range",
      "id": "title_size",
      "min": 16,
      "max": 36,
      "step": 2,
      "unit": "px",
      "label": "Title size",
      "default": 24
    },
    {
      "type": "range",
      "id": "description_size",
      "min": 12,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Description size",
      "default": 14
    },
    {
      "type": "range",
      "id": "table_text_size",
      "min": 12,
      "max": 18,
      "step": 1,
      "unit": "px",
      "label": "Table text size",
      "default": 14
    },
    {
      "type": "range",
      "id": "notes_title_size",
      "min": 14,
      "max": 22,
      "step": 1,
      "unit": "px",
      "label": "Notes title size",
      "default": 16
    },
    {
      "type": "range",
      "id": "notes_text_size",
      "min": 12,
      "max": 16,
      "step": 1,
      "unit": "px",
      "label": "Notes text size",
      "default": 13
    }
  ],
  "presets": [
    {
      "name": "Size chart"
    }
  ]
}
{% endschema %}